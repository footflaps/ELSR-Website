{% extends "base.html" %}


{% block content %}

<head>
	
	<!---------------------------------------------------------------------------------------------------->
	<!--                                Load JavaScript for chart.js                                    -->
	<!---------------------------------------------------------------------------------------------------->
	
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
	
</head>



<!---------------------------------------------------------------------------------------------------->
<!--                                     Page Header                                                -->
<!---------------------------------------------------------------------------------------------------->

<header class="masthead" style="background-image: url({{ url_for('static', filename='img/admin-bg.jpg')}})">
	<div class="overlay"></div>
	<div class="container">
		<div class="row">
			<div class="col-lg-8 col-md-10 mx-auto">
				<div class="page-heading">
					<h1>Admin Console</h1>
					<span class="subheading">The power of God!</span>
				</div>
			</div>
		</div>
	</div>
</header>


<!---------------------------------------------------------------------------------------------------->
<!--                                 Show flash messages                                            -->
<!---------------------------------------------------------------------------------------------------->

{% with messages = get_flashed_messages() %}
{% if messages %}
{% for message in messages %}
<div class="alert alert-warning text-center">
	{{ message }}
</div>
{% endfor %}
{% endif %}
{% endwith %}


<!---------------------------------------------------------------------------------------------------->
<!--                                     Google Maps Status                                         -->
<!---------------------------------------------------------------------------------------------------->

<div class="container">
	<div class="row">
		<div class="col-lg-8 col-md-10 mx-auto">

			<h2>Google Maps Status</h2>
			<ul>
				<li>Map Count since midnight is {{ map_count }} / {{ map_limit }}, {{ "£%.2f"|format(map_cost_ukp) }}</li>
			</ul>
			
		</div>
	</div>
	
	<div class="row">
		<div class="col-lg-8 col-md-10 mx-auto">
			
			<h3 class="mb-3">Graph of Google Map Counts</h3>
			
			<!---------------------------------------------------------------------------------------------------->
			<!--                                 Show Google maps usage graph                                   -->
			<!---------------------------------------------------------------------------------------------------->

			<div style="height: 300px; width: 100%;">
				<canvas id="myChart"></canvas>
			</div>
			
			<script>
			
				var custom_icon = new Image();
          
		        const data = {
		            labels: {{ dataset['dates'] | tojson }},
		            datasets: [{
		                label: 'Google Map Counts',
		                data: {{ dataset['counts'] | tojson }},
		                fill: false,
		                borderColor: 'rgb(75, 192, 192)',
                        tension: 0.1
                    },
                    {
		                label: 'Map Limit',
		                data: {{ dataset['limits'] | tojson }},
		                fill: false,
		                borderColor: 'rgb(200, 55, 85)',
                        tension: 0.1
                    }],
				};

	            const config = {
					  type: 'line',
					  data: data,
					  options: {
					        maintainAspectRatio: false,
					        scales: {
					            x: {
					                position: 'bottom'
					            },
					        },
					        plugins: {
		                       legend: {
	                                display: true
                               }
					        }
					  }
				};
	        	
		        const myChart = new Chart(
		            document.getElementById('myChart'),
		            config
		        );
	         
	        </script>
			
		</div>
	</div>
	
	<div class="row mt-5">
		<div class="col-lg-8 col-md-10 mx-auto">
			
			{% if map_status %}
				
				<!-- Maps are enabled -->
				<h2 class="float-left" style="color: green">
					<i class="fa-regular fa-thumbs-up fa-xl"></i>
				    Maps Enabled
				</h2>
			
			{% else %}
				
				<!-- Maps are disabled -->
				<h2 class="float-left" style="color:red">
					<i class="fa-solid fa-triangle-exclamation fa-2xl"></i> &nbsp;
					Maps Disabled! &nbsp;
					<i class="fa-solid fa-triangle-exclamation fa-2xl"></i>
				</h2>
		
			{% endif %}
			
			
			<!-- Button to expose hidden table -->
			<a class="btn btn-primary float-right"  data-toggle="collapse" href="#collapseMapControls"
			   role="button" aria-expanded="false" aria-controls="collapseExample" id="show_mapcontrols">
                   SHOW
            </a>
	
		</div>
	</div>
	
	<!-- Collapsed / Hidden Map options -->
	<div class="collapse" id="collapseMapControls">
		<div class="row mt-3">
			<div class="col-lg-8 col-md-10 mx-auto">
				<div class="card card-body my-3">
	                <div class="clearfix">
		               
						{% if map_status %}
		     
							<!-- Maps are enabled -->
		                    <p class="float-left">Disable Google Maps Loading</p>
		                
							<button class="btn btn-danger float-right" type="button" data-toggle="modal"
							        data-target="#disableMaps">
								Disable Maps
							</button>
			
						{% else %}
						
		                    <!-- Maps are disabled -->
		                    <p class="float-left">Maps can only be enabled if below daily threshold.
		                    Currently {{ map_count }} / {{ map_limit }}, {{ "£%.2f"|format(map_cost_ukp) }}</p>
		                
		                    {% if map_count <= map_limit %}
								<button class="btn btn-primary float-right my-2 ml-2" type="button" data-toggle="modal"
								        data-target="#enableMaps">
									Enable Maps
								</button>
		                    {% endif %}
						
		                    <button class="btn btn-primary float-right my-2" type="button" data-toggle="modal"
							        data-target="#boostMapLimit">
								Increase Limit by 250 / £1.25
							</button>
		     
						{% endif %}
				
					</div>
				</div>
			</div>
		</div>
	</div>
	
	<!-- Break before next section -->
	<div class="row">
		<div class="col-lg-8 col-md-10 mx-auto">
			
			<hr>
			
		</div>
	</div>
</div>


<!---------------------------------------------------------------------------------------------------->
<!--                                     Twilio-Balance                                             -->
<!---------------------------------------------------------------------------------------------------->

<div class="container">
	<div class="row">
		<div class="col-lg-8 col-md-10 mx-auto">

			<h2>Twilio Balance (SMS provider)</h2>
			{% if twilio_balance[0] < 5 %}
			
				<h2 class="my-3" style="color:red">
					<i class="fa-solid fa-triangle-exclamation fa-2xl"></i> &nbsp;
					{{ "£%.2f"|format(twilio_balance[0]) }} &nbsp;
					<i class="fa-solid fa-triangle-exclamation fa-2xl"></i>
				</h2>
			
			{% else %}
			
				<h2 class="my-3" style="color: green">
					<i class="fa-regular fa-thumbs-up fa-xl"></i>
					{{ "£%.2f"|format(twilio_balance[0]) }}
				</h2>
			
			{% endif %}
			
			<hr>
			
		</div>
	</div>
</div>


<!---------------------------------------------------------------------------------------------------->
<!--                                     Free space on server                                       -->
<!---------------------------------------------------------------------------------------------------->

{% if free_per %}

	<div class="container">
		<div class="row">
			<div class="col-lg-8 col-md-10 mx-auto">
	
				<h2>Server Free Space:</h2>
				{% if free_per < 10  %}
				
					<h2 class="my-3" style="color:red">
						<i class="fa-solid fa-triangle-exclamation fa-2xl"></i> &nbsp;
						{{ free_per }}%  &nbsp;
						<i class="fa-solid fa-triangle-exclamation fa-2xl"></i>
					</h2>
				
				{% else %}
				
					<h2 class="my-3" style="color: green">
						<i class="fa-regular fa-thumbs-up fa-xl"></i>
						{{ free_per }}%
					</h2>
				
				{% endif %}
				
				<hr>
				
			</div>
		</div>
	</div>

{% endif %}


<!---------------------------------------------------------------------------------------------------->
<!--                                        Messages                                                -->
<!---------------------------------------------------------------------------------------------------->

<a name="messages" ></a>
{% if messages %}
	<div class="container">
		<div class="row">
			<div class="col-lg-8 col-md-10 mx-auto">
		
				{% if messages | count == 1 %}
					<h2 class="post-title float-left">{{ messages | count }} Message:</h2>
				{% else %}
					<h2 class="post-title float-left">{{ messages | count }} Messages:</h2>
				{% endif %}
				
				<!-- Button to expose hidden table -->
				<a class="btn btn-primary float-right"  data-toggle="collapse" href="#collapseMessageList"
				   role="button" aria-expanded="false" aria-controls="collapseExample" id="show_messages">
	                   SHOW
	            </a>
				
			</div>
		</div>

		<div class="collapse" id="collapseMessageList">
			<div class="row mt-3">
				<div class="col-lg-8 col-md-10 mx-auto">
	
					<div class="accordion" id="accordionExample">
				
						{% for message in messages %}
						
							<!------------------------------------------------------>
							<!--                   One Message                    -->
							<!------------------------------------------------------>
							<div class="card">
								
								<!-- Header -->
								<div class="card-header" id="heading{{loop.index}}">
									<h5 class="mb-0">
										<!-- Show different icon / button if read / unread -->
										{% if message.been_read() %}
											<button class="btn-sm btn-secondary mr-2" type="button" data-toggle="collapse" data-target="#collapse{{loop.index}}"
										            aria-expanded="true" aria-controls="collapse{{loop.index}}">
												<i class="fa-regular fa-envelope-open fa-xl"></i>
												Message {{loop.index}}
											</button>
										{% else %}
											<button class="btn-sm btn-primary mr-2" type="button" data-toggle="collapse" data-target="#collapse{{loop.index}}"
										            aria-expanded="true" aria-controls="collapse{{loop.index}}">
												<i class="fa-regular fa-envelope fa-xl"></i>
												Message {{loop.index}}
											</button>
										{% endif %}
									</h5>
								</div>
								
								<!-- Body -->
								<div id="collapse{{loop.index}}" class="collapse" aria-labelledby="heading{{loop.index}}"
								     data-parent="#accordionExample">
									<div class="card-body">
										<strong>From: {{ message.from_name }}</strong><br>
										<strong>Date: {{ message.sent_date }}</strong><br>
										{{ message.body }}
										
										<hr>
										
										<!-- Reply Button -->
										<a data-toggle="modal" data-target="#replyMessageModal{{message.id}}">
											<button class="btn-sm btn-primary mr-2 float-left mb-3"
											        type="button">Reply</button>
										</a>
										
										<!-- Mark read / unread buttons -->
										{% if message.been_read() %}

											<!-- Mini form to mark a message unread -->
											<form class="form-group"
											      action="{{ url_for('mark_unread', message_id=message.id, return_path=url_for('admin_page', anchor='messages')) }}"
											      method="post">
												<input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
												<button type="submit" class="btn-sm btn-secondary mr-2 float-left mb-3">Mark as unRead</button>
											</form>

										{% else %}

											<!-- Mini form to mark a message read -->
											<form class="form-group"
											      action="{{ url_for('mark_read', message_id=message.id, return_path=url_for('admin_page', anchor='messages')) }}"
											      method="post">
												<input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
												<button type="submit" class="btn-sm btn-secondary mr-2 float-left mb-3">Mark as Read</button>
											</form>

										{% endif %}

										<!-- Mini form to delete a message -->
										<form class="form-group"
										      action="{{ url_for('delete_message', message_id=message.id, return_path=url_for('admin_page', anchor='messages')) }}"
										      method="post">
											<input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
											<button type="submit" class="btn-sm btn-danger float-right mb-3">Delete</button>
										</form>
										
									</div>
								</div>
							
							</div>
		
							<!------------------------------------------------------>
							<!--                 End of One Message               -->
							<!------------------------------------------------------>
						
							<!---------------------------------------------------------------------------------------------------->
							<!--                              Modal form for Reply to Message                                   -->
							<!---------------------------------------------------------------------------------------------------->
							
							<div class="modal fade" id="replyMessageModal{{message.id}}" tabindex="-1" role="dialog"
							     aria-labelledby="exampleModalLabel" aria-hidden="true">
								<div class="modal-dialog" role="document">
									<div class="modal-content">
										<div class="modal-header">
											<h5 class="modal-title" id="replyMessageLabel{{message.id}}">Can't let someone else have the last word?</h5>
											
											<button type="button" class="close" data-dismiss="modal" aria-label="Close">
												<span aria-hidden="true">&times;</span>
											</button>
										</div>
										<div class="modal-body">
											<!--
												NB To get the two parameters use:
													1. gpx_id = request.args.get('gpx_id', None)
							                        2. confirm = request.form['confirm']
											-->
											<form action="{{ url_for('reply_message', message_id=message.id, return_path=url_for('admin_page', anchor='messages')) }}" method="POST">
												
												<input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
												
												<div class="form-group">
													<label for="body" class="col-form-label">
														If you really must, enter your message here:
													</label>
													<textarea class="form-control" name="body" id="body" rows="6"></textarea>
												</div>
												
												<div class="modal-footer">
													<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
													<button type="submit" class="btn btn-primary">MUST HAVE LAST WORD</button>
												</div>
												
											</form>
										</div>
									</div>
								</div>
							</div>  <!-- End of modal form -->
						
						{% endfor %}
					
					</div> <!-- end of accordian -->
				</div> <!-- end of col -->
			</div> <!-- row -->
			
		</div>
	
		<!-- Separator before next section -->
		<div class="row">
			<div class="col-lg-8 col-md-10 mx-auto">
				<hr>
			</div>
		</div>

	</div>
	
{% endif %}


<!---------------------------------------------------------------------------------------------------->
<!--                                      Admin Table                                               -->
<!---------------------------------------------------------------------------------------------------->

<div class="container">

	<div class="row">
		<div class="col-lg-8 col-md-10 mx-auto">
			
			{% if admins | count == 1 %}
				<h2 class="post-title float-left">{{ admins | count }} Admin:</h2>
			{% else %}
				<h2 class="post-title float-left">{{ admins | count }} Admins:</h2>
			{% endif %}
			
			<!-- Button to expose hidden table -->
			<a class="btn btn-primary float-right"  data-toggle="collapse" href="#collapseAdminList"
			   role="button" aria-expanded="false" aria-controls="collapseExample" id="show_admins">
	            SHOW
	        </a>
			
		</div>
	</div>
	
	<!-- Collapsed / Hidden table of users -->
	<div class="collapse" id="collapseAdminList">
		<div class="row mt-3">
			<div class="col-lg-8 col-md-10 mx-auto">
				
				<table id="adminTable"
				       class="table table-striped table-bordered table-sm table-condensed"
				       style="width: 100%"
					   data-page-length="25">
					
					<!-- Header -->
					<thead>
						<tr>
							<th scope="col">ID</th>
							<th scope="col">Name</th>
							<th scope="col">Perm.</th>
							{% if not mobile %}
								<th scope="col">Start date</th>
							{% endif %}
							<th scope="col">Last Login</th>
							{% if current_user.admin() %}
								<th scope="col">Email</th>
							{% endif %}
						</tr>
					</thead>
				
					<tbody>
						{% for user in admins: %}
							{% if user.admin() %}
							<tr>
								<th scope="row">{{ user.id }}</th>
								<td>
									<a href="{{ url_for('user_page', user_id=user.id) }}">
										{{ user.name }}
										<img src="{{ user.email | gravatar }}"
							                 width="40"
									         style="border-radius: 50%;"/>
									</a>
								</td>
								<td>
									{{ user.permissions }}
									{% if user.has_valid_phone_number() %}
										<i class="fa-solid fa-user-lock"></i>
									{% endif %}
								</td>
								{% if not mobile %}
									<td>{{ user.start_date }}</td>
								{% endif %}
								<td>{{ user.last_login }}  ({{ user.last_login_ip }})</td>
								{% if current_user.admin() %}
									<td>{{ user.email }}</td>
								{% endif %}
							</tr>
							
							{% endif %}
						{% endfor %}
					</tbody>
			
				</table>
			
			</div>
		</div>
	</div>
	
	<!-- Separator before next section -->
	<div class="row">
		<div class="col-lg-8 col-md-10 mx-auto">
			<hr>
		</div>
	</div>
	
</div>

	
<!---------------------------------------------------------------------------------------------------->
<!--                                     Trusted User Table                                         -->
<!---------------------------------------------------------------------------------------------------->

<div class="container">
	
	<div class="row">
		<div class="col-lg-8 col-md-10 mx-auto">
			
			<h2 class="post-title float-left">{{ trusted_users | count }} Trusted Users:</h2>
			
			<!-- Button to expose hidden table -->
			<a class="btn btn-primary float-right"  data-toggle="collapse" href="#collapseTrustedUserList"
			   role="button" aria-expanded="false" aria-controls="collapseExample" id="show_trusted_users">
	            SHOW
	        </a>
			
		</div>
	</div>

	<!-- Collapsed / Hidden table of users -->
	<div class="collapse" id="collapseTrustedUserList">
		<div class="row mt-3">
			<div class="col-lg-8 col-md-10 mx-auto">
				
				<table id="trustedUserTable" class="table table-striped table-bordered table-sm table-condensed"
					   style="width: 100%"
				       data-page-length="25"
				       data-order='[[ 0, "dec" ]]'>
			
					<!-- Header -->
					<thead>
						<tr>
							<th scope="col">ID</th>
							<th scope="col">Name</th>
							<th scope="col">Perm.</th>
							{% if not mobile %}
								<th scope="col">Start date</th>
							{% endif %}
							<th scope="col">Last Login</th>
							<th scope="col">Email</th>
							{% if not mobile %}
								<th scope="col">Auth codes</th>
							{% endif %}
						</tr>
					</thead>
					
					<tbody>
						{% for user in trusted_users: %}
							
							<!--
								Colour code according to status
								Yellow      Not verified
								Read        Barred
							-->
							{% if user.blocked() %}
								<tr class="table-danger">
							{% elif not user.verified() %}
								<tr class="table-warning">
							{% else %}
								<tr>
							{% endif %}
							
								<td scope="row">{{ user.id }}</td>
								<td>
									<a href="{{ url_for('user_page', user_id=user.id) }}">
										{{ user.name }}
										<img src="{{ user.email | gravatar }}"
							                 width="40"
									         style="border-radius: 50%;"/>
									</a>
								</td>
								<td>
									{{ user.permissions }}
									{% if user.has_valid_phone_number() %}
										<i class="fa-solid fa-user-lock"></i>
									{% endif %}
									{% if user.readwrite() %}
										<i class="fa-solid fa-user-pen"></i>
									{% endif %}
									{% if user.blocked() %}
										<i class="fa-solid fa-door-closed"></i>
									{% endif %}
								</td>
								{% if not mobile %}
									<td>{{ user.start_date }}</td>
								{% endif %}
								<td>{{ user.last_login }} ({{ user.last_login_ip }})</td>
								<td>{{ user.email }}
								    {% if user.phone_number %} {{ user.phone_number }} {% endif %}</td>
								{% if not mobile %}
									<td scope="col">{{ user.verification_code }} / {{ user.verification_code_timestamp }}</td>
								{% endif %}
							</tr>
							
						{% endfor %}
					</tbody>
				
				</table>
			
				<p>Note: <br>
				   -- Users in Red have had their email address blocked. <br>
				   -- Users in yellow haven't verified their email addresses yet.</p>
						
			</div>
			
		</div>
	</div>
	
	<!-- Separator before next section -->
	<div class="row">
		<div class="col-lg-8 col-md-10 mx-auto">
			<hr>
		</div>
	</div>
	
</div>


<!---------------------------------------------------------------------------------------------------->
<!--                                   Untrusted User Table                                         -->
<!---------------------------------------------------------------------------------------------------->

<div class="container">
	
	<div class="row">
		<div class="col-lg-8 col-md-10 mx-auto">
			
			<h2 class="post-title float-left">{{ untrusted_users | count }} Untrusted Users:</h2>
			
			<!-- Button to expose hidden table -->
			<a class="btn btn-primary float-right"  data-toggle="collapse" href="#collapseUntrustedUserList"
			   role="button" aria-expanded="false" aria-controls="collapseExample" id="show_untrusted_users">
	            SHOW
	        </a>
			
		</div>
	</div>

	<!-- Collapsed / Hidden table of users -->
	<div class="collapse" id="collapseUntrustedUserList">
		<div class="row mt-3">
			<div class="col-lg-8 col-md-10 mx-auto">
				
				<table id="untrustedUserTable" class="table table-striped table-bordered table-sm table-condensed"
					   style="width: 100%"
				       data-page-length="25"
				       data-order='[[ 0, "dec" ]]'>
			
					<!-- Header -->
					<thead>
						<tr>
							<th scope="col">ID</th>
							<th scope="col">Name</th>
							<th scope="col">Perm.</th>
							{% if not mobile %}
								<th scope="col">Start date</th>
							{% endif %}
							<th scope="col">Last Login</th>
							<th scope="col">Email</th>
							{% if not mobile %}
								<th scope="col">Auth codes</th>
							{% endif %}
						</tr>
					</thead>
					
					<tbody>
						{% for user in untrusted_users: %}
							
							<!--
								Colour code according to status
								Yellow      Not verified
								Read        Barred
							-->
							{% if user.blocked() %}
								<tr class="table-danger">
							{% elif not user.verified() %}
								<tr class="table-warning">
							{% else %}
								<tr>
							{% endif %}
							
								<td scope="row">{{ user.id }}</td>
								<td>
									<a href="{{ url_for('user_page', user_id=user.id) }}">
										{{ user.name }}
										<img src="{{ user.email | gravatar }}"
							                 width="40"
									         style="border-radius: 50%;"/>
									</a>
								</td>
								<td>
									{{ user.permissions }}
									{% if user.has_valid_phone_number() %}
										<i class="fa-solid fa-user-lock"></i>
									{% endif %}
									{% if user.readwrite() %}
										<i class="fa-solid fa-user-pen"></i>
									{% endif %}
									{% if user.blocked() %}
										<i class="fa-solid fa-door-closed"></i>
									{% endif %}
								</td>
								{% if not mobile %}
									<td>{{ user.start_date }}</td>
								{% endif %}
								<td>{{ user.last_login }} ({{ user.last_login_ip }})</td>
								<td>{{ user.email }}
								    {% if user.phone_number %} {{ user.phone_number }} {% endif %}</td>
								{% if not mobile %}
									<td scope="col">{{ user.verification_code }} / {{ user.verification_code_timestamp }}</td>
								{% endif %}
							</tr>
							
						{% endfor %}
					</tbody>
				
				</table>
			
				<p>Note: <br>
				   -- Users in Red have had their email address blocked. <br>
				   -- Users in yellow haven't verified their email addresses yet.</p>
						
			</div>
			
		</div>
	</div>
	
	<!-- Separator before next section -->
	<div class="row">
		<div class="col-lg-8 col-md-10 mx-auto">
			<hr>
		</div>
	</div>
	
</div>


<!---------------------------------------------------------------------------------------------------->
<!--                                      Table of email alerts                                     -->
<!---------------------------------------------------------------------------------------------------->


<div class="container">
	<div class="row">
		<div class="col-lg-8 col-md-10 mx-auto">

			<h2 class="post-title float-left">Email alerts:</h2>
		
			<!-- Button to expose hidden table -->
			<a class="btn btn-primary float-right"  data-toggle="collapse" href="#collapseAlertList"
			   role="button" aria-expanded="false" aria-controls="collapseExample" id="show_alerts">
                   SHOW
            </a>
			
		</div>
	</div>

	<!-- Collapsed / Hidden table of alerts in Calendar -->
	<div class="collapse" id="collapseAlertList">
		<div class="row mt-3">
			<div class="col-lg-8 col-md-10 mx-auto">
			
				<table id="alertTable" class="table table-striped table-bordered table-sm table-condensed"
				       data-order='[[ 0, "dec" ]]' data-page-length="25"
				       style="width: 100%">
			
					<!-- Header -->
					<thead>
	                    <tr>
	                        <th scope="col">Event</th>
		                    <th scope="col">Emails</th>
		                </tr>
	                </thead>
			
					<tbody>
						{% for key, value in email_alerts.items() %}
							
							<tr>
								<td scope="row">{{ key }}</td>
								<td scope="row">
									{% for email in value %}
										<img src="{{ email | gravatar }}"
							                 width="40"
									         style="border-radius: 50%;"/> {{ email }} <br>
									{% endfor %}
								</td>
							</tr>
					
						{% endfor %}
					
					</tbody>
				
				</table>
				
			</div>
		</div>
	</div>

	<!-- Separator before next section -->
	<div class="row">
		<div class="col-lg-8 col-md-10 mx-auto">
			<hr>
		</div>
	</div>
	
</div>


<!---------------------------------------------------------------------------------------------------->
<!--                                Table of all rides in calendar                                  -->
<!---------------------------------------------------------------------------------------------------->

<div class="container">
	<div class="row">
		<div class="col-lg-8 col-md-10 mx-auto">

			<!-- Shorter description on smaller screens -->
			{% if mobile %}
				<h2 class="post-title float-left">{{rides|length}} rides:</h2>
			{% else %}
				<h2 class="post-title float-left">There are {{rides|length}} rides:</h2>
			{% endif %}
			
			{% if rides | count > 0: %}
			
				<!-- Button to expose hidden table -->
				<a class="btn btn-primary float-right"  data-toggle="collapse" href="#collapseRideList"
				   role="button" aria-expanded="false" aria-controls="collapseExample" id="show_rides">
	                   SHOW
	            </a>
			
			{% endif %}
			
		</div>
	</div>
	
	{% if rides | count > 0: %}
	
		<!-- Collapsed / Hidden table of rides in Calendar -->
		<div class="collapse" id="collapseRideList">
			<div class="row mt-3">
				<div class="col-lg-8 col-md-10 mx-auto">
				
					<table id="rideTable" class="table table-striped table-bordered table-sm table-condensed"
					       data-order='[[ 0, "dec" ]]' data-page-length="25"
					       style="width: 100%">
				
						<!-- Header -->
						<thead>
		                    <tr>
		                        <th scope="col">ID</th>
			                    <th scope="col">Date</th>
			                    <th scope="col">Leader</th>
			                    <th scope="col">Destination</th>
			                    <th scope="col">Group</th>
			                    <th scope="col">Owner</th>
			                </tr>
		                </thead>
				
						<tbody>
							{% for ride in rides: %}
								
								<tr>
									<td scope="row">{{ ride.id }}</td>
									<td scope="row">
										<a href="{{ url_for('weekend', date=ride.date) }}">
											{{ ride.date }}
										</a>
									</td>
									<td scope="row">{{ ride.leader }}</td>
									<td scope="row">
										<!-- Might not have a cafe_id set -->
										{% if ride.cafe_id %}
											<a href="{{ url_for('cafe_details', cafe_id=ride.cafe_id) }}">
												{{ ride.destination }}
											</a>
										{% else %}
											{{ ride.destination }}
										{% endif %}
									</td>
									<td scope="row">{{ ride.group }}</td>
									<td scope="row">{{ get_user_name(ride.email) }}</td>
								</tr>
						
							{% endfor %}
						
						</tbody>
					
					</table>
					
				</div>
			</div>
		</div>
	
	{% endif %}
	
	<!-- Separator before next section -->
	<div class="row">
		<div class="col-lg-8 col-md-10 mx-auto">
			<hr>
		</div>
	</div>
	
</div>


<!---------------------------------------------------------------------------------------------------->
<!--                                Table of all socials in calendar                                -->
<!---------------------------------------------------------------------------------------------------->

<div class="container">
	<div class="row">
		<div class="col-lg-8 col-md-10 mx-auto">

			<!-- Shorter description on smaller screens -->
			{% if mobile %}
				<h2 class="post-title float-left">{{ socials|length }} socials:</h2>
			{% else %}
				<h2 class="post-title float-left">There are {{ socials|length }} social events:</h2>
			{% endif %}
			
			{% if socials | count > 0: %}
			
				<!-- Button to expose hidden table -->
				<a class="btn btn-primary float-right"  data-toggle="collapse" href="#collapseSocialList"
				   role="button" aria-expanded="false" aria-controls="collapseExample" id="show_socials">
	                   SHOW
	            </a>
			
			{% endif %}
			
		</div>
	</div>
	
	{% if socials | count > 0: %}
	
		<!-- Collapsed / Hidden table of rides in Calendar -->
		<div class="collapse" id="collapseSocialList">
			<div class="row mt-3">
				<div class="col-lg-8 col-md-10 mx-auto">
				
					<table id="socialTable" class="table table-striped table-bordered table-sm table-condensed"
					       data-order='[[ 1, "dec" ]]' data-page-length="25"
					       style="width: 100%">
				
						<!-- Header -->
						<thead>
		                    <tr>
		                        <th scope="col">ID</th>
			                    <th scope="col">Date</th>
			                    <th scope="col">Host</th>
			                    <th scope="col">Destination</th>
			                    <th scope="col">Owner</th>
			                </tr>
		                </thead>
				
						<tbody>
							{% for social in socials: %}
								
								<tr>
									<td scope="row">{{ social.id }}</td>
									<td scope="row">
										<a href="{{ url_for('social', date=social.date) }}">
											{{ social.date }}
										</a>
									</td>
									<td scope="row">{{ social.organiser }}</td>
									<td scope="row">
										{{ social.destination }}
										{% if social.private %}
											<i class="fa-solid fa-lock"></i>
										{% endif %}
									</td>
									<td scope="row">
										<a href="{{ url_for('user_page', user_id=get_user_id_from_email(social.email)) }}">
											{{ get_user_name(social.email) }}
										</a>
									</td>
								</tr>
						
							{% endfor %}
						
						</tbody>
					
					</table>
					
				</div>
			</div>
		</div>
	
	{% endif %}
	
	<!-- Separator before next section -->
	<div class="row">
		<div class="col-lg-8 col-md-10 mx-auto">
			<hr>
		</div>
	</div>
	
</div>



<!---------------------------------------------------------------------------------------------------->
<!--                                    Table of all blog posts                                     -->
<!---------------------------------------------------------------------------------------------------->

<div class="container">
	<div class="row">
		<div class="col-lg-8 col-md-10 mx-auto">

			<!-- Shorter description on smaller screens -->
			{% if mobile %}
				<h2 class="post-title float-left">{{ blogs|length }} blogs:</h2>
			{% else %}
				<h2 class="post-title float-left">There are {{ blogs|length }} blog posts:</h2>
			{% endif %}
			
			{% if blogs | count > 0: %}
			
				<!-- Button to expose hidden table -->
				<a class="btn btn-primary float-right"  data-toggle="collapse" href="#collapseBlogList"
				   role="button" aria-expanded="false" aria-controls="collapseExample" id="show_blogs">
	                   SHOW
	            </a>
			
			{% endif %}
			
		</div>
	</div>
	
	{% if blogs | count > 0: %}
	
		<!-- Collapsed / Hidden table of rides in Calendar -->
		<div class="collapse" id="collapseBlogList">
			<div class="row mt-3">
				<div class="col-lg-8 col-md-10 mx-auto">
				
					<table id="blogTable" class="table table-striped table-bordered table-sm table-condensed"
					       data-order='[[ 1, "dec" ]]' data-page-length="25"
					       style="width: 100%">
				
						<!-- Header -->
						<thead>
		                    <tr>
		                        <th scope="col">ID</th>
			                    <th scope="col">Date</th>
			                    <th scope="col">Author</th>
			                    <th scope="col">Title</th>
			                    <th scope="col">Category</th>
			                    <th scope="col">Private</th>
			                </tr>
		                </thead>
				
						<tbody>
							{% for blog in blogs: %}
								
								<tr>
									<td scope="row">{{ blog.id }}</td>
									<td scope="row">{{ blog.date }}</td>
									<td scope="row">{{ get_user_name(blog.email) }} ({{ blog.email }})</td>
									<td scope="row">
										<a href="{{ url_for('blog', blog_id = blog.id) }}">{{ blog.title }}</a>
									</td>
									<td scope="row">{{ blog.category }}</td>
									<td scope="row">{{ blog.privacy }}</td>
								</tr>
						
							{% endfor %}
						
						</tbody>
					
					</table>
					
				</div>
			</div>
		</div>
	
	{% endif %}
	
	<!-- Separator before next section -->
	<div class="row">
		<div class="col-lg-8 col-md-10 mx-auto">
			<hr>
		</div>
	</div>
	
</div>


<!---------------------------------------------------------------------------------------------------->
<!--                                Table of all classifieds posts                                  -->
<!---------------------------------------------------------------------------------------------------->

<div class="container">
	<div class="row">
		<div class="col-lg-8 col-md-10 mx-auto">

			<!-- Shorter description on smaller screens -->
			{% if mobile %}
				<h2 class="post-title float-left">{{ classifieds|length }} classifieds:</h2>
			{% else %}
				<h2 class="post-title float-left">There are {{ classifieds|length }} classified posts:</h2>
			{% endif %}
			
			{% if classifieds | count > 0: %}
			
				<!-- Button to expose hidden table -->
				<a class="btn btn-primary float-right"  data-toggle="collapse" href="#collapseClassifiedList"
				   role="button" aria-expanded="false" aria-controls="collapseExample" id="show_classifieds">
	                   SHOW
	            </a>
			
			{% endif %}
			
		</div>
	</div>
	
	{% if classifieds | count > 0: %}
	
		<!-- Collapsed / Hidden table of rides in Calendar -->
		<div class="collapse" id="collapseClassifiedList">
			<div class="row mt-3">
				<div class="col-lg-8 col-md-10 mx-auto">
				
					<table id="classifiedTable" class="table table-striped table-bordered table-sm table-condensed"
					       data-order='[[ 1, "dec" ]]' data-page-length="25"
					       style="width: 100%">
				
						<!-- Header -->
						<thead>
		                    <tr>
		                        <th scope="col">ID</th>
			                    <th scope="col">Date</th>
			                    <th scope="col">Owner</th>
			                    <th scope="col">Title</th>
			                    <th scope="col">Category</th>
			                    <th scope="col">Price</th>
			                    <th scope="col">Status</th>
			                </tr>
		                </thead>
				
						<tbody>
							{% for classified in classifieds: %}
								
								<tr>
									<td scope="row">{{ classified.id }}</td>
									<td scope="row">{{ classified.date }}</td>
									<td scope="row">{{ get_user_name(classified.email) }} ({{ classified.email }})</td>
									<td scope="row">
										<a href="{{ url_for('classifieds', classified_id = classified.id) }}">{{ classified.title }}</a>
									</td>
									<td scope="row">{{ classified.category }}</td>
									<td scope="row">£{{ classified.price }}</td>
									<td scope="row">{{ classified.status }}</td>
								</tr>
						
							{% endfor %}
						
						</tbody>
					
					</table>
					
				</div>
			</div>
		</div>
	
	{% endif %}
	
	<!-- Separator before next section -->
	<div class="row">
		<div class="col-lg-8 col-md-10 mx-auto">
			<hr>
		</div>
	</div>
	
</div>


<!---------------------------------------------------------------------------------------------------->
<!--                                          Events                                                -->
<!---------------------------------------------------------------------------------------------------->

<a name="eventLog" ></a>
<div class="container">
	
	<div class="row">
		<div class="col-lg-8 col-md-10 mx-auto">
			
			<h2 class="post-title float-left">Event Log:</h2>
			
			<!-- Button to expose hidden table -->
			<a class="btn btn-primary float-right" data-toggle="collapse" href="#collapseEventList"
			   role="button" aria-expanded="false" aria-controls="collapseExample" id="show_events">
	            SHOW
	        </a>
			
		</div>
	</div>

	<!-- Collapsed / Hidden table of cafes -->
	<div class="collapse" id="collapseEventList">
		<div class="row">
			<div class="col-lg-8 col-md-10 mx-auto my-5">
				
				<!-- Use a button group -->
				<div class="btn-group float-right" role="group">
				
					<!-- Change selection -->
					{% if days == "all" %}
						<a class="btn btn-sm btn-primary disabled" href="{{ url_for('admin_page', days='all') }}">
							All
						</a>
					{% else %}
						<a class="btn btn-sm btn-primary" href="{{ url_for('admin_page', days='all') }}">
							All
						</a>
					{% endif %}
					
					{% if days == 28 %}
						<a class="btn btn-sm btn-primary disabled" href="{{ url_for('admin_page', days=28 ) }}">
							4 Weeks
						</a>
					{% else %}
						<a class="btn btn-sm btn-primary" href="{{ url_for('admin_page', days=28 ) }}">
							4 Weeks
						</a>
					{% endif %}
					
					{% if days == 7 %}
						<a class="btn btn-sm btn-primary disabled" href="{{ url_for('admin_page', days=7 ) }}">
							1 Week
						</a>
					{% else %}
						<a class="btn btn-sm btn-primary" href="{{ url_for('admin_page', days=7 ) }}">
							1 Week
						</a>
					{% endif %}
					
					{% if days == 1 %}
						<a class="btn btn-sm btn-primary disabled" href="{{ url_for('admin_page', days=1) }}">
							24 hr
						</a>
					{% else %}
						<a class="btn btn-sm btn-primary" href="{{ url_for('admin_page', days=1) }}">
							24 hr
						</a>
					{% endif %}
				
					<!-- Delete Events (Super Admin only) -->
					{% if current_user.id == 1 %}
						<button class="btn btn-sm btn-danger" data-toggle="modal" data-target="#deleteEventsModal">
	                        Delete
						</button>
					{% endif %}
					
					<!-- Delete 404s (Super Admin only) -->
					{% if current_user.id == 1 %}
						<button class="btn btn-sm btn-danger" data-toggle="modal" data-target="#delete404Modal">
	                        Delete 404s
						</button>
					{% endif %}
					
				</div> <!-- End button group -->
			</div> <!-- End column -->
		</div> <!-- End row -->
	
		<!-- Summary count -->
		<div class="row my-2">
			<div class="col-lg-8 col-md-10 mx-auto">
				<h4>{{ events|count }} events in {{ days }} days</h4>
			</div>
		</div>
		
		<div class="row">
			<div class="col-lg-8 col-md-10 mx-auto">
	
				<table id="eventTable" class="table table-striped table-bordered table-sm table-condensed"
					data-order='[[ 0, "dec" ]]' data-page-length="25"
				    style="width: 100%">
			
					<!-- Header -->
					<thead>
						<tr>
							<th scope="col">ID</th>
							<th scope="col">Name</th>
							<th scope="col">Date</th>
							<th scope="col">Type</th>
							<th scope="col">Event</th>
						</tr>
					</thead>
					
					<tbody>
						{% for event in events: %}
							{% if not mobile or event.type != "404" %}
							
								{% if flag_event(event.type) %}
									<tr class="table-danger">
								{% elif good_event(event.type) %}
									<tr class="table-success">
								{% elif toandfro_event(event.type) %}
									<tr class="table-warning">
								{% else %}
									<tr>
								{% endif %}
							
									<td scope="row" class="small">
										{{ event.id }}
										
										<!-- Mini form to delete an event -->
										<form action="{{ url_for('delete_event', event_id=event.id) }}" method="post">
											<input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
											<button type="submit" style="background: none; border: none;">✘</button>
										</form>
										
									</td>
									<td class="small">{{ get_user_name(event.email) }}</td>
									<td class="small">{{ readable_date(event.date) }}</td>
									<td class="small">{{ event.type }}</td>
									<td class="small">{{ event.details }}</td>
								</tr>
							{% endif %}
						{% endfor %}
					</tbody>
			
				</table>
			
				{% if not events: %}
					<h4>No events over the last {{ days }} days</h4>
				{% endif %}
			
			</div>
		</div>
	</div>
	
	<!-- Separator before next section -->
	<div class="row mb-3">
		<div class="col-lg-8 col-md-10 mx-auto">
			<hr>
		</div>
	</div>
	
</div>


<!---------------------------------------------------------------------------------------------------->
<!--                                    Database / Directory sizes                                  -->
<!---------------------------------------------------------------------------------------------------->

<div class="container">
	<div class="row">
		<div class="col-lg-8 col-md-10 mx-auto">

			<h2 class="post-title float-left">File / Dir sizes:</h2>
		
			<!-- Button to expose hidden table -->
			<a class="btn btn-primary float-right"  data-toggle="collapse" href="#collapseFileList"
			   role="button" aria-expanded="false" aria-controls="collapseExample" id="show_files">
                   SHOW
            </a>
			
		</div>
	</div>
	
	<!-- Collapsed / Hidden table of rides in Calendar -->
	<div class="collapse" id="collapseFileList">
		<div class="row mt-3">
			<div class="col-lg-8 col-md-10 mx-auto">
			
				<table id="fileTable" class="table table-striped table-bordered table-sm table-condensed"
				       data-order='[[ 2, "dec" ]]' data-page-length="25"
				       style="width: 100%">
			
					<!-- Header -->
					<thead>
                        <tr>
	                        <th scope="col">File / Dir</th>
		                    <th scope="col">Name</th>
		                    <th scope="col">Size (MB)</th>
		                </tr>
	                </thead>
			
					<tbody>
						{% for file in  files: %}
							
							<!-- Colour code row by file size -->
							{% if file.size > 1000 %}
								<tr class="table-danger">
							{% elif file.size > 250 %}
								<tr class="table-warning">
							{% else %}
								<tr>
							{% endif %}
						
								<td scope="row">{{ file.type }}</td>
								<td scope="row">{{ file.name }}</td>
								<td scope="row">{{ "%.2f"|format(file.size) }}</td>
							</tr>
					
						{% endfor %}
					
					</tbody>
				
				</table>
				
			</div>
		</div>
	</div>
	
	
	<!-- Separator before next section -->
	<div class="row">
		<div class="col-lg-8 col-md-10 mx-auto">
			<hr>
		</div>
	</div>
	
</div>


<!---------------------------------------------------------------------------------------------------->
<!--                              Modal form for deleting events                                    -->
<!---------------------------------------------------------------------------------------------------->

<div class="modal fade" id="deleteEventsModal" tabindex="-1" role="dialog" aria-labelledby="deleteEventsModal"
     aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="deleteEventsModal2">Delete all events for {{ days }} days?</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<!--
					NB To get the two parameters use:
						1. gpx_id = request.args.get('gpx_id', None)
                        2. confirm = request.form['confirm']
				-->
				<form action="{{ url_for('delete_events', days=days, user_id='admin') }}" method="post">
					
					<input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
					
					<div class="form-group">
						<label class="col-form-label">
							Enter <strong>your password</strong> below.
						</label>
						<input type="password" class="form-control" name="password">
					</div>
					
					<div class="modal-footer">
						<button type="button" class="btn btn-primary" data-dismiss="modal">CANCEL</button>
						<button type="submit" class="btn btn-danger">INITIATE PURGE</button>
					</div>
					
				</form>
			</div>
		</div>
	</div>
</div>


<!---------------------------------------------------------------------------------------------------->
<!--                              Modal form for deleting 404s                                      -->
<!---------------------------------------------------------------------------------------------------->

<div class="modal fade" id="delete404Modal" tabindex="-1" role="dialog" aria-labelledby="delete404Moda"
     aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="delete404Modal2">Delete all 404 events?</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<!--
					NB To get the two parameters use:
						1. gpx_id = request.args.get('gpx_id', None)
                        2. confirm = request.form['confirm']
				-->
				<form action="{{ url_for('delete_404s') }}" method="post">
					
					<input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
					
					<div class="form-group">
						<label class="col-form-label">
							Enter <strong>your password</strong> below.
						</label>
						<input type="password" class="form-control" name="password">
					</div>
					
					<div class="modal-footer">
						<button type="button" class="btn btn-primary" data-dismiss="modal">CANCEL</button>
						<button type="submit" class="btn btn-danger">INITIATE PURGE</button>
					</div>
					
				</form>
			</div>
		</div>
	</div>
</div>


<!---------------------------------------------------------------------------------------------------->
<!--                                Modal form for enable Maps                                      -->
<!---------------------------------------------------------------------------------------------------->

<div class="modal fade" id="enableMaps" tabindex="-1" role="dialog">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="enableMaps2">Enable Google Maps</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				
				<form action="{{ url_for('enable_maps') }}" method="post">
					
					<input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
					
					<div class="form-group">
						<label class="col-form-label">
							Enter <strong>your password</strong> below.
						</label>
						<input type="password" class="form-control" name="password">
					</div>
					
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">CANCEL</button>
						<button type="submit" class="btn btn-primary">ENABLE</button>
					</div>
					
				</form>
			</div>
		</div>
	</div>
</div>


<!---------------------------------------------------------------------------------------------------->
<!--                               Modal form for disable Maps                                      -->
<!---------------------------------------------------------------------------------------------------->

<div class="modal fade" id="disableMaps" tabindex="-1" role="dialog">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="disableMaps2">Disable Google Maps</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				
				This will disable Google Maps from loading on the site. In place of all the maps, users will see
				a static image saying the site is experiencing unusual loading and has temporarily disabled maps.
				
				<form action="{{ url_for('disable_maps') }}" method="post">
					
					<input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
					
					<div class="form-group">
						<label class="col-form-label">
							Enter <strong>your password</strong> below.
						</label>
						<input type="password" class="form-control" name="password">
					</div>
					
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">CANCEL</button>
						<button type="submit" class="btn btn-danger">DISABLE</button>
					</div>
					
				</form>
			</div>
		</div>
	</div>
</div>


<!---------------------------------------------------------------------------------------------------->
<!--                               Modal form for upping Map limit                                  -->
<!---------------------------------------------------------------------------------------------------->

<div class="modal fade" id="boostMapLimit" tabindex="-1" role="dialog">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="boostMapLimit2">Increase Google Maps Limit</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				
				NB Only use this if the count is slightly over the threshold. If it's miles over, there's no
				   point, the site is probably under attack.
				
				<form action="{{ url_for('boost_maps') }}" method="post">
					
					<input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
					
					<div class="form-group">
						<label class="col-form-label">
							Enter <strong>your password</strong> below.
						</label>
						<input type="password" class="form-control" name="password">
					</div>
					
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">CANCEL</button>
						<button type="submit" class="btn btn-primary">Up Limit</button>
					</div>
					
				</form>
			</div>
		</div>
	</div>
</div>


<!---------------------------------------------------------------------------------------------------->
<!--                                 Open page at Events anchor                                     -->
<!---------------------------------------------------------------------------------------------------->

<script>
	
	{% if anchor == 'messages' %}
		
		/* Open collapsed section */
		$("#collapseMessageList").collapse('show');
		
		/* Change button name */
		document.getElementById('show_messages').innerHTML = 'HIDE';
        
        /* Jump to anchor */
        window.location = (""+window.location).replace(/#[A-Za-z0-9_]*$/,'')+"#{{anchor}}"
	    
	{% elif anchor == 'eventLog'%}
	
		/* Open collapsed section */
		$("#collapseEventList").collapse('show');
  
        /* Change button name */
        document.getElementById('show_events').innerHTML = 'HIDE';
  
		/* Jump to anchor */
        window.location = (""+window.location).replace(/#[A-Za-z0-9_]*$/,'')+"#{{anchor}}"
	
	{% endif %}
	
</script>


<!---------------------------------------------------------------------------------------------------->
<!--                               Activate jQuery on the Tables                                    -->
<!--                                SHOW <-> HIDE Button labels                                     -->
<!---------------------------------------------------------------------------------------------------->

<script>
	
	$(document).ready( function () {
	
		/* jQuery on our tables where we want dataTables to run */
		$('#trustedUserTable').DataTable({
			
			/* Default table length */
			pageLength: 25,
			
			"autoWidth": false,
			
			/* "simple_numbers" => 'Previous' and 'Next' buttons, plus page numbers */
			"pagingType": "simple_numbers",
			
			"oLanguage": {
				"oPaginate": {
					"sFirst": "<<", // This is the link to the first page
					"sPrevious": "<", // This is the link to the previous page
					"sNext": ">", // This is the link to the next page
					"sLast": ">>" // This is the link to the last page
				}
			}
		});
		
		$('#untrustedUserTable').DataTable({
			
			/* Default table length */
			pageLength: 25,
			
			"autoWidth": false,
			
			/* "simple_numbers" => 'Previous' and 'Next' buttons, plus page numbers */
			"pagingType": "simple_numbers",
			
			"oLanguage": {
				"oPaginate": {
					"sFirst": "<<", // This is the link to the first page
					"sPrevious": "<", // This is the link to the previous page
					"sNext": ">", // This is the link to the next page
					"sLast": ">>" // This is the link to the last page
				}
			}
		});
		
		$('#rideTable').DataTable({
			
			/* Default table length */
			pageLength: 25,
			
			"autoWidth": false,
			
			/* "simple_numbers" => 'Previous' and 'Next' buttons, plus page numbers */
			"pagingType": "simple_numbers",
			
			"oLanguage": {
				"oPaginate": {
					"sFirst": "<<", // This is the link to the first page
					"sPrevious": "<", // This is the link to the previous page
					"sNext": ">", // This is the link to the next page
					"sLast": ">>" // This is the link to the last page
				}
			}
		})
		
		$('#socialTable').DataTable({
			
			/* Default table length */
			pageLength: 25,
			
			"autoWidth": false,
			
			/* "simple_numbers" => 'Previous' and 'Next' buttons, plus page numbers */
			"pagingType": "simple_numbers",
			
			"oLanguage": {
				"oPaginate": {
					"sFirst": "<<", // This is the link to the first page
					"sPrevious": "<", // This is the link to the previous page
					"sNext": ">", // This is the link to the next page
					"sLast": ">>" // This is the link to the last page
				}
			}
		})
		
		$('#blogTable').DataTable({
			
			/* Default table length */
			pageLength: 25,
			
			"autoWidth": false,
			
			/* "simple_numbers" => 'Previous' and 'Next' buttons, plus page numbers */
			"pagingType": "simple_numbers",
			
			"oLanguage": {
				"oPaginate": {
					"sFirst": "<<", // This is the link to the first page
					"sPrevious": "<", // This is the link to the previous page
					"sNext": ">", // This is the link to the next page
					"sLast": ">>" // This is the link to the last page
				}
			}
		})
		
		$('#classifiedTable').DataTable({
			
			/* Default table length */
			pageLength: 25,
			
			"autoWidth": false,
			
			/* "simple_numbers" => 'Previous' and 'Next' buttons, plus page numbers */
			"pagingType": "simple_numbers",
			
			"oLanguage": {
				"oPaginate": {
					"sFirst": "<<", // This is the link to the first page
					"sPrevious": "<", // This is the link to the previous page
					"sNext": ">", // This is the link to the next page
					"sLast": ">>" // This is the link to the last page
				}
			}
		})
		
		$('#eventTable').DataTable({
			
			/* Default table length */
			pageLength: 25,
			
			"autoWidth": false,
			
			/* "simple_numbers" => 'Previous' and 'Next' buttons, plus page numbers */
			"pagingType": "simple_numbers",
			
			"oLanguage": {
				"oPaginate": {
					"sFirst": "<<", // This is the link to the first page
					"sPrevious": "<", // This is the link to the previous page
					"sNext": ">", // This is the link to the next page
					"sLast": ">>" // This is the link to the last page
				}
			}
		})
		
		$('#fileTable').DataTable({
			
			/* Default table length */
			pageLength: 25,
			
			"autoWidth": false,
			
			/* "simple_numbers" => 'Previous' and 'Next' buttons, plus page numbers */
			"pagingType": "simple_numbers",
			
			"oLanguage": {
				"oPaginate": {
					"sFirst": "<<", // This is the link to the first page
					"sPrevious": "<", // This is the link to the previous page
					"sNext": ">", // This is the link to the next page
					"sLast": ">>" // This is the link to the last page
				}
			}
		})
		
		
		
		/* Map - Hide <-> Show buttons name change */
		$("#collapseMapControls").on("show.bs.collapse", function(){
            document.getElementById('show_mapcontrols').innerHTML = 'HIDE';
        });
       $("#collapseMapControls").on("hide.bs.collapse", function(){
            document.getElementById('show_mapcontrols').innerHTML = 'SHOW';
        });
		
		/* Messages - Hide <-> Show buttons name change */
		$("#collapseMessageList").on("show.bs.collapse", function(){
            document.getElementById('show_messages').innerHTML = 'HIDE';
        });
       $("#collapseMessageList").on("hide.bs.collapse", function(){
            document.getElementById('show_messages').innerHTML = 'SHOW';
        });
		
		/* Admins - Hide <-> Show buttons name change */
		$("#collapseAdminList").on("show.bs.collapse", function(){
            document.getElementById('show_admins').innerHTML = 'HIDE';
        });
       $("#collapseAdminList").on("hide.bs.collapse", function(){
            document.getElementById('show_admins').innerHTML = 'SHOW';
        });
        
        /* Trusted Users - Hide <-> Show buttons name change */
		$("#collapseTrustedUserList").on("show.bs.collapse", function(){
            document.getElementById('show_trusted_users').innerHTML = 'HIDE';
        });
       $("#collapseTrustedUserList").on("hide.bs.collapse", function(){
            document.getElementById('show_trusted_users').innerHTML = 'SHOW';
        });
        
        /* Untrusted Users - Hide <-> Show buttons name change */
		$("#collapseUntrustedUserList").on("show.bs.collapse", function(){
            document.getElementById('show_untrusted_users').innerHTML = 'HIDE';
        });
       $("#collapseUntrustedUserList").on("hide.bs.collapse", function(){
            document.getElementById('show_untrusted_users').innerHTML = 'SHOW';
        });
        
        /* Alerts - Hide <-> Show buttons name change */
		$("#collapseAlertList").on("show.bs.collapse", function(){
            document.getElementById('show_alerts').innerHTML = 'HIDE';
        });
       $("#collapseAlertList").on("hide.bs.collapse", function(){
            document.getElementById('show_alerts').innerHTML = 'SHOW';
        });
        
        /* Rides - Hide <-> Show buttons name change */
		$("#collapseRideList").on("show.bs.collapse", function(){
            document.getElementById('show_rides').innerHTML = 'HIDE';
        });
       $("#collapseRideList").on("hide.bs.collapse", function(){
            document.getElementById('show_rides').innerHTML = 'SHOW';
        });
        
        /* Socials - Hide <-> Show buttons name change */
		$("#collapseSocialList").on("show.bs.collapse", function(){
            document.getElementById('show_socials').innerHTML = 'HIDE';
        });
       $("#collapseSocialList").on("hide.bs.collapse", function(){
            document.getElementById('show_socials').innerHTML = 'SHOW';
        });
        
        /* Blogs - Hide <-> Show buttons name change */
		$("#collapseBlogList").on("show.bs.collapse", function(){
            document.getElementById('show_blogs').innerHTML = 'HIDE';
        });
       $("#collapseBlogList").on("hide.bs.collapse", function(){
            document.getElementById('show_blogs').innerHTML = 'SHOW';
        });
        
         /* Classifieds - Hide <-> Show buttons name change */
		$("#collapseClassifiedList").on("show.bs.collapse", function(){
            document.getElementById('show_classifieds').innerHTML = 'HIDE';
        });
       $("#collapseClassifiedList").on("hide.bs.collapse", function(){
            document.getElementById('show_classifieds').innerHTML = 'SHOW';
        });
        
		/* Events - Hide <-> Show buttons name change */
		$("#collapseEventList").on("show.bs.collapse", function(){
            document.getElementById('show_events').innerHTML = 'HIDE';
        });
       $("#collapseEventList").on("hide.bs.collapse", function(){
            document.getElementById('show_events').innerHTML = 'SHOW';
        });
        
        /* Files - Hide <-> Show buttons name change */
		$("#collapseFileList").on("show.bs.collapse", function(){
            document.getElementById('show_files').innerHTML = 'HIDE';
        });
       $("#collapseFileList").on("hide.bs.collapse", function(){
            document.getElementById('show_files').innerHTML = 'SHOW';
        });
       
	} );
	
</script>


{% endblock %}



{% block scripts %}
{% endblock %}